<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vocab Master</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Google+Sans+Flex:opsz,wght,GRAD,ROND@6..144,100..1000,0..100,0..100&display=swap"
      rel="stylesheet"
    />
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css?v=1.16" />
    <!-- Material Icons -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <!-- SheetJS -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.0/package/dist/xlsx.full.min.js"></script>
  </head>
  <body class="light-mode">
    <div class="app-shell">
      <!-- Main Workspace -->
      <main class="main-workspace">
        <!-- Login View -->
        <section id="login" class="view active">
          <div class="bento-card max-w-400-center">
            <div class="mb-2rem">
              <span class="material-icons icon-login-large">lock_person</span>
            </div>
            <h1>Welcome</h1>
            <p class="text-muted-mb-2rem">
              Please sign in to access your vocabulary.
            </p>
            <button
              id="google-login-btn"
              class="btn btn-primary btn-full-width btn-google-signin"
            >
              <img
                src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"
                alt="Google"
                class="google-icon-svg"
              />
              Sign in with Google
            </button>
          </div>
        </section>

        <!-- Dashboard View -->
        <section id="dashboard" class="view">
          <div class="bento-grid full-height dashboard">
            <!-- Summary Stats -->
            <div
              class="bento-card col-12 orange card-height-half"
              id="card-due-container"
            >
              <div class="card-label">Today Due</div>
              <div class="card-value-flex">
                <div class="card-value card-value-large" id="due-count">0</div>
                <div class="card-action-label" id="start-review-action">
                  Start Review!
                </div>
              </div>
            </div>

            <div
              class="bento-card col-4 mobile-col-4 card-height-half"
              id="card-new-container"
            >
              <div class="card-label">New</div>
              <div class="flex-fill-bottom">
                <div class="card-value" id="dashboard-new-count">0</div>
              </div>
            </div>

            <div
              class="bento-card col-4 mobile-col-4 card-height-half"
              id="card-lrn-container"
            >
              <div class="card-label">Learning</div>
              <div class="flex-fill-bottom">
                <div class="card-value" id="dashboard-lrn-count">0</div>
              </div>
            </div>

            <div
              class="bento-card col-4 mobile-col-4 card-height-half"
              id="card-mst-container"
            >
              <div class="card-label">Mastered</div>
              <div class="flex-fill-bottom">
                <div class="card-value" id="dashboard-mst-count">0</div>
              </div>
            </div>
          </div>
        </section>

        <!-- Words View -->
        <section id="words" class="view">
          <!-- Vocabulary List Section (Full Width) -->
          <div
            class="full-width-list-container vocab-section-container"
            style="margin-top: 0"
          >
            <div class="section-label section-header-label">
              <div class="filter-controls-flex">
                <div class="search-box-custom">
                  <span class="material-icons search-icon">search</span>
                  <input
                    type="text"
                    id="search-input"
                    placeholder="Search words..."
                  />
                </div>
                <div class="filter-group-row">
                  <select id="filter-status" class="vocab-select-pill">
                    <option value="all">All Status</option>
                    <option value="mastered">Mastered</option>
                    <option value="learning">Learning</option>
                    <option value="new">New</option>
                  </select>

                  <!-- Starred Toggle -->
                  <label class="toggle-switch" style="margin-bottom: 0">
                    <span class="filter-label">Starred</span>
                    <input
                      type="checkbox"
                      id="filter-starred-only"
                      class="toggle-input"
                    />
                    <div class="toggle-track">
                      <span class="toggle-thumb"></span>
                    </div>
                  </label>
                </div>
              </div>
            </div>

            <div id="card-list-modern">
              <!-- Cards injected here -->
            </div>

            <!-- Pagination Controls -->
            <div id="pagination-controls" class="pagination-container hidden">
              <button id="prev-page-btn" class="btn btn-tonal btn-sm">
                <span class="material-icons pagination-icon-prev"
                  >arrow_back</span
                >
              </button>
              <span id="page-indicator" class="page-indicator-text"
                >Page 1 of 1</span
              >
              <button id="next-page-btn" class="btn btn-tonal btn-sm">
                <span class="material-icons pagination-icon-next"
                  >arrow_forward</span
                >
              </button>
            </div>
          </div>
          <!-- Fixed Navigation Bar (Mobile) -->
          <!-- <div class="form-actions form-actions-fixed mobile-only">
            <button
              class="btn btn-tonal nav-btn btn-flex-grow-1"
              data-target="import"
            >
              Import
            </button>
            <button
              class="btn btn-tonal nav-btn btn-flex-grow-1"
              data-target="add-card"
            >
              Add Card
            </button>
            <button
              class="btn btn-primary nav-btn orange btn-flex-grow-2"
              data-target="review-setup"
            >
              Start Review
            </button>
          </div> -->
        </section>

        <!-- Add Card View -->
        <section id="add-card" class="view">
          <div class="view-header-flex">
            <h1>Add New Card</h1>
          </div>
          <div class="bento-card full-height">
            <form id="add-card-form">
              <div class="input-wrapper-flex">
                <label for="word_en">English Word</label>
                <input
                  type="text"
                  id="word_en"
                  placeholder="e.g., Resilient"
                  class="input-pill"
                  required
                />
              </div>
              <div class="input-wrapper-flex">
                <label for="meaning_zh">Chinese Meaning</label>
                <input
                  type="text"
                  id="meaning_zh"
                  placeholder="e.g., 有韌性的"
                  class="input-pill"
                  required
                />
              </div>
              <div class="input-wrapper-flex">
                <label>Example Sentences (Max 5)</label>
                <div id="examples-container" class="flex-col-gap">
                  <!-- Dynamic inputs will be added here -->
                </div>
                <button
                  type="button"
                  id="add-example-btn"
                  class="btn btn-tonal btn-text"
                  style="margin: 0.5rem 0rem"
                >
                  Add Sentence
                </button>
              </div>
              <div class="form-group checkbox-group mb-0">
                <div class="checkbox-wrapper">
                  <label class="checkbox-custom-label" for="is_starred">
                    <input
                      type="checkbox"
                      id="is_starred"
                      class="checkbox-custom"
                    />
                    <span class="checkbox-checkmark">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="icon-check-xs"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                        stroke="currentColor"
                        stroke-width="1"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                          clip-rule="evenodd"
                        ></path>
                      </svg>
                    </span>
                  </label>
                  <label class="checkbox-label-text" for="is_starred">
                    Mark as Starred
                  </label>
                </div>
              </div>
            </form>
          </div>
          <div class="form-actions form-actions-fixed">
            <button
              type="button"
              class="btn btn-tonal cancel-nav btn-flex-grow-1"
            >
              Cancel
            </button>
            <button
              form="add-card-form"
              type="submit"
              class="btn btn-primary btn-flex-grow-2"
            >
              Save Card
            </button>
          </div>
        </section>

        <!-- Import View -->
        <section id="import" class="view">
          <div class="view-header-flex">
            <h1>Import Vocabulary</h1>
          </div>
          <div class="bento-card full-height" style="padding: 0rem">
            <div
              id="import-file-section"
              style="padding: 1.5rem 1.5rem 0rem 1.5rem"
            >
              <div class="section-label">Select CSV File</div>
              <div class="form-group" style="margin-bottom: 0rem">
                <input
                  type="file"
                  id="csv-file-input"
                  accept=".csv"
                  class="file-input-dropzone"
                />
              </div>
            </div>

            <div id="import-preview" class="hidden">
              <div
                class="section-label"
                style="padding: 1.5rem 1.5rem 0rem 1.5rem"
              >
                Data Preview
              </div>
              <div id="preview-list" class="preview-list-container">
                <!-- Preview items injected here -->
              </div>
            </div>
          </div>
          <div
            id="import-initial-actions"
            class="form-actions form-actions-fixed"
          >
            <button
              type="button"
              class="btn btn-tonal cancel-nav btn-full-width"
              id="import-cancel-initial"
            >
              Cancel
            </button>
          </div>
          <div
            id="import-actions-container"
            class="form-actions form-actions-fixed hidden"
          >
            <button
              type="button"
              class="btn btn-tonal cancel-nav btn-flex-grow-1"
            >
              Cancel
            </button>
            <button
              id="confirm-import-btn"
              class="btn btn-primary btn-flex-grow-2"
            >
              Confirm Import
            </button>
          </div>
        </section>

        <!-- Review Configuration View -->
        <section id="review-setup" class="view">
          <div class="view-header-flex">
            <h1>Review Session</h1>
          </div>
          <div class="bento-card full-height">
            <form id="review-setup-form">
              <div class="form-group input-group-flex">
                <div class="input-wrapper-flex">
                  <label>Selection Scope</label>
                  <select
                    name="scope"
                    class="input-pill select-rounded select-with-chevron"
                  >
                    <option value="all">All Vocabulary</option>
                    <option value="starred">Starred</option>
                  </select>
                </div>
                <div class="input-wrapper-flex">
                  <label>Limit</label>
                  <select
                    name="limit"
                    class="input-pill select-rounded select-with-chevron"
                  >
                    <option value="10" selected>10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                    <option value="25">25</option>
                  </select>
                </div>
              </div>
              <div class="form-group checkbox-group mt-n05 mb-6">
                <div class="checkbox-wrapper">
                  <label class="checkbox-custom-label" for="review-due-only">
                    <input
                      type="checkbox"
                      id="review-due-only"
                      name="dueOnly"
                      checked
                      class="checkbox-custom"
                    />
                    <span class="checkbox-checkmark">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="icon-check-xs"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                        stroke="currentColor"
                        stroke-width="1"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                          clip-rule="evenodd"
                        ></path>
                      </svg>
                    </span>
                  </label>
                  <label class="checkbox-label-text" for="review-due-only">
                    Due Only -
                    <span
                      id="due-count-badge"
                      class="font-bold text-accent-orange"
                      >0</span
                    >
                    cards
                  </label>
                </div>
              </div>

              <div class="form-group mb-0">
                <div class="mode-selection">
                  <label class="mode-option">
                    <input
                      type="radio"
                      name="mode"
                      value="1"
                      class="hidden-radio"
                      checked
                    />
                    <div class="mode-title">
                      <span>Flip Card (EN)</span>
                    </div>
                  </label>
                  <label class="mode-option">
                    <input
                      type="radio"
                      name="mode"
                      value="2"
                      class="hidden-radio"
                    />
                    <div class="mode-title">
                      <span>Flip Card (ZH)</span>
                    </div>
                  </label>
                  <label class="mode-option">
                    <input
                      type="radio"
                      name="mode"
                      value="3"
                      class="hidden-radio"
                    />
                    <div class="mode-title">
                      <span>Spelling</span>
                    </div>
                  </label>
                  <label class="mode-option">
                    <input
                      type="radio"
                      name="mode"
                      value="4"
                      class="hidden-radio"
                    />
                    <div class="mode-title">
                      <span>Cloze</span>
                    </div>
                  </label>
                </div>
              </div>
            </form>
          </div>
          <div class="form-actions form-actions-fixed">
            <button
              type="button"
              class="btn btn-tonal cancel-nav btn-flex-grow-1"
            >
              Cancel
            </button>
            <button
              form="review-setup-form"
              type="submit"
              class="btn btn-primary btn-flex-grow-2"
            >
              Start Session
            </button>
          </div>
        </section>

        <section id="review-session" class="view">
          <div class="view-header-flex">
            <div class="review-session-header">
              <div id="review-progress" class="review-progress-text">0 / 0</div>
              <button id="exit-review-btn" class="btn btn-tonal btn-text">
                Exit Session
              </button>
            </div>
          </div>

          <div id="review-content">
            <!-- Flashcard injected here -->
          </div>

          <div class="review-controls">
            <div
              id="reveal-btn-container"
              class="form-actions form-actions-fixed"
            >
              <button
                id="reveal-btn"
                class="btn btn-primary btn-reveal btn-full-width"
              >
                <span class="material-icons mr-2">visibility</span>
                Show Answer
              </button>
            </div>

            <div
              id="self-assess-btns"
              class="form-actions form-actions-fixed hidden"
            >
              <button
                class="btn btn-tonal text-forgot btn-flex-grow-1"
                id="btn-assess-forgot"
              >
                I Forgot
              </button>
              <button
                class="btn btn-primary btn-flex-grow-2"
                id="btn-assess-know"
              >
                I Know
              </button>
            </div>

            <div
              id="grading-btns"
              class="form-actions form-actions-fixed hidden"
            >
              <button class="btn btn-dark btn-full-width" id="btn-next-card">
                Next Card
              </button>
            </div>
          </div>
        </section>

        <!-- Review Summary View -->
        <section id="review-summary" class="view">
          <div class="view-header-flex">
            <h1>Review Summary</h1>
          </div>
          <div class="bento-grid full-height">
            <div class="bento-card col-12 dark">
              <div class="card-label">Review Session Result</div>
              <div class="flex-fill-bottom">
                <div class="card-value" id="summary-total">0</div>
              </div>
            </div>

            <div class="bento-card col-6 green mobile-col-6">
              <div class="card-label">Remembered</div>
              <div class="flex-fill-bottom">
                <div class="card-value" id="summary-correct">0</div>
              </div>
            </div>

            <div class="bento-card col-6 white mobile-col-6">
              <div class="card-label">Forgot</div>
              <div class="flex-fill-bottom">
                <div class="card-value" id="summary-wrong">0</div>
              </div>
            </div>
          </div>

          <div class="form-actions form-actions-fixed" style="border: none">
            <button
              class="btn btn-primary nav-btn btn-full-width"
              data-target="dashboard"
            >
              Back to Dashboard
            </button>
          </div>
        </section>

        <!-- Shared Bottom Navigation -->
        <nav id="main-nav" class="view-header-flex bottom-nav">
          <div class="nav-item active" data-target="dashboard">
            <img
              src="assets/layout-dashboard-filled.svg"
              alt="Dashboard"
              class="nav-icon"
              data-icon-default="assets/layout-dashboard.svg"
              data-icon-active="assets/layout-dashboard-filled.svg"
            />
            <span class="nav-label">Dashboard</span>
          </div>
          <div class="nav-item" data-target="words">
            <img
              src="assets/word-list.svg"
              alt="Words"
              class="nav-icon"
              data-icon-default="assets/word-list.svg"
              data-icon-active="assets/word-list-fill.svg"
            />
            <span class="nav-label">Words</span>
          </div>
        </nav>
      </main>
    </div>

    <!-- Scripts (Type Module) -->
    <script type="module" src="js/app.js"></script>

    <!-- Bento Modal Overlay -->
    <div id="modal-overlay">
      <div id="modal-content">
        <!-- Content injected dynamically -->
      </div>
    </div>
  </body>
</html>
